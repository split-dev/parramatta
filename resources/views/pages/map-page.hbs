<!DOCTYPE html>
<html lang="en">
<head>
  {{> ../common/head }}
</head>
<body class="map-page">
{{> ../common/mega-menu }}
{{#with topInfo}}
  <div class="map-bg">
    <div class="map-bg__info" style="background-image: url(' {{image}} ')"></div>
    <div class="map-bg__box">
      <h3>{{category}}</h3>
      <h1>{{title}}</h1>
    </div>
  </div>
{{/with}}
<section class="map">
  <div class="row">
    <div class="map__filter">
      <div class="map__top-filter column">
        <a href="#" class="map__button" data-target="false"> <img src="images/icons/setup-passive.svg" alt="setup"> Filter</a>
        <a href="#" class="map__reset"><img src="images/icons/refresh-passive.svg">Reset filters</a>
      </div>
      <div class="map__toggle">
        <form class="map__list">
          <div class="map__locate column">
            <h2>Locations</h2>
            <div class="map__radio">
              {{#each radio}}
                <div class="select">
                  <input type="checkbox" id="{{id}}"/>
                  <label for="{{id}}">{{name}}</label>
                </div>
              {{/each}}
            </div>
          </div>
          <div class="map__facilites column">
            <h2>Facilities</h2>
            <div class="map__checkbox">
              {{#each checkbox}}
                <div class="select-checkbox">
                  <input type="checkbox" id="{{id}}"/>
                  <label for="{{id}}">{{name}}</label>
                </div>
              {{/each}}
            </div>
          </div>
          <div class="submit column">
            <a href="#" class="btn-blue--animate" data-state="">
    <span>
      <span>F</span>
      <span>i</span>
      <span>l</span>
      <span>t</span>
      <span>e</span>
      <span>r</span>
      <span>t</span>
      <span>&nbsp;</span>
      <span>r</span>
      <span>e</span>
      <span>s</span>
      <span>u</span>
      <span>l</span>
      <span>t</span>
      <span>s</span>
    </span>
              <span>
      <span>F</span>
      <span>i</span>
      <span>l</span>
      <span>t</span>
      <span>e</span>
      <span>r</span>
      <span>t</span>
      <span>&nbsp;</span>
      <span>r</span>
      <span>e</span>
      <span>s</span>
      <span>u</span>
      <span>l</span>
      <span>t</span>
      <span>s</span>
    </span>
            </a>
          </div>
        </form>
      </div>
    </div>
    <div id="map"></div>
  </div>
</section>
<section class="news zoom">
  <div class="row">
    {{#each news}}
      {{> ../partials/news-box-locate }}
    {{/each}}
  </div>
  <a href="#" class="loading-btn"><img src="images/icons/anim.svg"><img src="images/icons/events-loading.svg" alt="" class="hover">Loading more</a>
</section>
<section class="news events bottom zoom">
  <div class="row column">
    <h2>Upcoming events</h2>
  </div>
  <div class="row">
    {{#each news-bottom}}
      {{> ../partials/news-box }}
    {{/each}}
  </div>
  <a href="#" class="btn-blue--animate" data-state="">
    <span>
      <span>V</span>
      <span>i</span>
      <span>e</span>
      <span>w</span>
      <span>&nbsp;</span>
      <span>a</span>
      <span>l</span>
      <span>l</span>
      <span>&nbsp;</span>
      <span>e</span>
      <span>v</span>
      <span>e</span>
      <span>n</span>
      <span>t</span>
      <span>s</span>
    </span>
    <span>
      <span>V</span>
      <span>i</span>
      <span>e</span>
      <span>w</span>
      <span>&nbsp;</span>
      <span>a</span>
      <span>l</span>
      <span>l</span>
      <span>&nbsp;</span>
      <span>e</span>
      <span>v</span>
      <span>e</span>
      <span>n</span>
      <span>t</span>
      <span>s</span>
    </span>
  </a>
</section>
{{> ../common/cta }}
{{> ../common/mobile-nav }}
<footer>
  {{> ../common/footer }}
</footer>
<script type="text/javascript">

  // Функция initMap которая отрисует карту на странице
  function initMap() {
    var map = new google.maps.Map(document.getElementById('map'), {
      center: {lat: -33.810208, lng: 150.9845809},
      zoom: 12,
      disableDefaultUI: true,
      zoomControl: true,
      style: [
        {
          "featureType": "landscape.natural.landcover",
          "elementType": "labels.text",
          "stylers": [
            {
              "visibility": "off"
            }
          ]
        },
        {
          "featureType": "landscape.natural.terrain",
          "elementType": "labels.icon",
          "stylers": [
            {
              "visibility": "off"
            }
          ]
        },
        {
          "featureType": "poi.attraction",
          "elementType": "labels.text",
          "stylers": [
            {
              "visibility": "off"
            }
          ]
        },
        {
          "featureType": "poi.attraction",
          "elementType": "labels.icon",
          "stylers": [
            {
              "visibility": "off"
            }
          ]
        },
        {
          "featureType": "poi.government",
          "elementType": "labels.icon",
          "stylers": [
            {
              "visibility": "off"
            }
          ]
        },
        {
          "featureType": "poi.park",
          "elementType": "labels.text",
          "stylers": [
            {
              "visibility": "on"
            }
          ]
        },
        {
          "featureType": "poi.park",
          "elementType": "labels.icon",
          "stylers": [
            {
              "visibility": "off"
            }
          ]
        },
        {
          "featureType": "poi.place_of_worship",
          "elementType": "labels.text",
          "stylers": [
            {
              "visibility": "off"
            }
          ]
        },
        {
          "featureType": "road.highway",
          "elementType": "labels.text",
          "stylers": [
            {
              "visibility": "off"
            }
          ]
        },
        {
          "featureType": "road.highway",
          "elementType": "labels.icon",
          "stylers": [
            {
              "visibility": "off"
            }
          ]
        },
        {
          "featureType": "road.arterial",
          "elementType": "labels.icon",
          "stylers": [
            {
              "visibility": "off"
            }
          ]
        },
        {
          "featureType": "transit.station.airport",
          "elementType": "labels.icon",
          "stylers": [
            {
              "visibility": "off"
            }
          ]
        },
        {
          "featureType": "transit.station.bus",
          "elementType": "labels.icon",
          "stylers": [
            {
              "visibility": "off"
            }
          ]
        },
        {
          "featureType": "transit.station.rail",
          "elementType": "labels.icon",
          "stylers": [
            {
              "visibility": "off"
            }
          ]
        }
      ]
    });
    var image = {
      url: 'images/icons/marker-passive.svg',
      scaledSize: new google.maps.Size(15, 20)
    };
    var imageOrange = {
      url: 'images/icons/marker-active.svg',
      scaledSize: new google.maps.Size(23, 30)
    };
    var marker = new google.maps.Marker({
      position: {lat: -33.810208, lng: 150.9845809},
      map: map,
      icon: image,
      title: 'Click here for more details'
    });

    //window
    var info = [
            '<div class="info-map">'+
            '<strong>Barton Park</strong>'+
    '<p>Amenities, Long Jump Pit, Outdoor Ex…  Find out more</p>'+
    '<a href="#">Get directions</a>'+
    '</div>'
  ];
    var activeInfoWindow;
    let infowindow = new google.maps.InfoWindow({
      content: '<div class="info-map">'+
              '<strong>Barton Park</strong>'+
              '<p>Amenities, Long Jump Pit, Outdoor Ex…  Find out more</p>'+
              '<a href="#">Get directions\n' +
              '        <div class="arrow">\n' +
              '          <span class="line"></span><?xml version="1.0" encoding="UTF-8"?>\n' +
              '          <svg width="9px" height="18px" viewBox="0 0 9 18" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n' +
              '            <path d="M8.769,8.389 L1.823,0.807 C1.519,0.411 0.895,0.411 0.512,0.736 C0.329746578,0.885822338 0.217870103,1.10458238 0.203082366,1.34004865 C0.188294629,1.57551492 0.271922911,1.80655304 0.434,1.978 L6.034,8.083 L6.85852051,8.97552804 L6.033,9.867 L0.434,15.972 C0.067,16.313 0.17,16.901 0.555,17.225 C0.941,17.549 1.521,17.526 1.823,17.143 L8.77,9.56 C8.956,9.367 8.99,9.156 9.001,8.975 C8.982,8.785 8.9,8.532 8.769,8.389 Z" id="Path"></path>\n' +
              '          </svg>\n' +
              '        </div></a>',
    });
    marker.addListener('click', function() {
      if (activeInfoWindow) {
        activeInfoWindow.close();
      }
      infowindow.open(map, marker);
      marker.setIcon(imageOrange);
      activeInfoWindow = infowindow;
    });
    google.maps.event.addListener(map, "click", function(event) {
      infowindow.close();
      marker.setIcon(image)
    });
  }
</script>
<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD2Wcbw8MkjGjwn3ofcZ0Qb_s4aw9OkJ9k&callback=initMap"></script>
</body>
</html>
